<Window
    x:Class="TaskbarGroups.Windows.SettingsWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:models="using:TaskbarGroups.Models"
    Title="Taskbar Groups - Settings"
    Width="700"
    Height="500"
    MinWidth="500"
    MinHeight="400">

    <Grid RowDefinitions="Auto,*" Padding="24">
        <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
            <TextBlock Text="Taskbar Groups" FontSize="24" FontWeight="Bold" VerticalAlignment="Center"/>
            <Button x:Name="AddGroupButton" Content="+ New Group" Click="AddGroupButton_Click"/>
        </StackPanel>

        <Grid Grid.Row="1" ColumnDefinitions="200,*">
            <ListView x:Name="GroupsList"
                      Grid.Column="0"
                      SelectionMode="Single"
                      SelectionChanged="GroupsList_SelectionChanged"
                      Margin="0,0,16,0"
                      DisplayMemberPath="Name">
                <ListView.ItemTemplate>
                    <DataTemplate x:DataType="models:AppGroup">
                        <StackPanel Orientation="Horizontal" Spacing="8" Padding="8">
                            <FontIcon Glyph="&#xE8FD;" FontSize="16" VerticalAlignment="Center"/>
                            <TextBlock Text="{x:Bind Name}" VerticalAlignment="Center"/>
                        </StackPanel>
                    </DataTemplate>
                </ListView.ItemTemplate>
            </ListView>

            <Border Grid.Column="1" x:Name="GroupDetailsPanel"
                    Background="{ThemeResource CardBackgroundFillColorDefaultBrush}"
                    CornerRadius="8" Padding="20"
                    Visibility="Collapsed">
                <Grid RowDefinitions="Auto,Auto,*">
                    <StackPanel Orientation="Horizontal" Spacing="12" Margin="0,0,0,16">
                        <TextBlock x:Name="GroupTitle" Text="Group Name" FontSize="18" FontWeight="SemiBold"/>
                        <Button x:Name="RenameGroupButton" Content="Rename" Click="RenameGroupButton_Click"/>
                        <Button x:Name="DeleteGroupButton" Content="Delete" Click="DeleteGroupButton_Click" Foreground="Red"/>
                    </StackPanel>

                    <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="8" Margin="0,0,0,12">
                        <Button x:Name="AddAppButton" Content="+ Add App" Click="AddAppButton_Click"/>
                        <TextBlock Text="Drag apps here or click Add App" VerticalAlignment="Center" Opacity="0.7"/>
                    </StackPanel>

                    <ListView Grid.Row="2" x:Name="AppsList"
                              SelectionMode="None"
                              CanReorderItems="True"
                              CanDragItems="True"
                              AllowDrop="True"
                              Drop="AppsList_Drop"
                              DragOver="AppsList_DragOver">
                        <ListView.ItemTemplate>
                            <DataTemplate x:DataType="models:AppEntry">
                                <StackPanel Orientation="Horizontal" Spacing="12" Padding="8">
                                    <Image Width="32" Height="32" x:Name="AppIcon"/>
                                    <StackPanel VerticalAlignment="Center">
                                        <TextBlock Text="{x:Bind Name}" FontWeight="SemiBold"/>
                                        <TextBlock Text="{x:Bind Path}" FontSize="11" Opacity="0.7" TextTrimming="CharacterEllipsis"/>
                                    </StackPanel>
                                    <Button Content="&#xE74D;" FontFamily="Segoe Fluent Icons"
                                            VerticalAlignment="Center" Margin="8,0,0,0"
                                            Click="RemoveAppButton_Click" ToolTip="Remove"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </Grid>
            </Border>
        </Grid>
    </Grid>
</Window>
